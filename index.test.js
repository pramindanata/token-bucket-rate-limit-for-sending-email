// TODO test consume
// TODO test consume blocked by lock
// TODO test consume with multiple replica
// TODO test refill
// TODO test refill blocked by lock
// TODO test refill with multiple replica
// TODO test refill initial interval start early (if state exist previously before start and still between interval)
// TODO test refill initial interval use the same config (if prev state exist but exceed the max interval)
// TODO test refill initial interval use the same config (if there is no state in the beginning)